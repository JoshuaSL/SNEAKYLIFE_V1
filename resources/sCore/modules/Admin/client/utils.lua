jobList = {
    {
        name = "unemployed",
        grade = {
            [0] = {label = "Sans job fix"},
        },
    },
    {
        name = "mecano",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Novice"},
            [2] = {label = "Experimente"},
            [3] = {label = "Chef"},
            [4] = {label = "Patron"},
        },
    },
    {
        name = "police",
        grade = {
            [0] = {label = "Officer I"},
            [1] = {label = "Officer II"},
            [2] = {label = "Officer III"},
            [3] = {label = "Senior lead officer"},
            [4] = {label = "Sergeant I"},
            [5] = {label = "Sergeant II"},
            [6] = {label = "Lieutenant I"},
            [7] = {label = "Lieutenant II"},
            [8] = {label = "Captain"},
        },
    },
    {
        name = "ambulance",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Urgentiste"},
            [2] = {label = "Infirmier"},
            [3] = {label = "Médecin"},
            [4] = {label = "Médecin en chef"},
            [5] = {label = "Superviseur"},
            [6] = {label = "Assistant de direction"},
            [7] = {label = "Sous directeur"},
            [8] = {label = "Directeur"},
        },
    },
    {
        name = "carshop",
        grade = {
            [0] = {label = "Novice"},
            [1] = {label = "Intermediaire"},
            [2] = {label = "Experimente"},
            [3] = {label = "Patron"},
        },
    },
    { 
        name = "motoshop",
        grade = {
            [0] = {label = "Novice"},
            [1] = {label = "Intermediaire"},
            [2] = {label = "Experimente"},
            [3] = {label = "Patron"},
        },
    },
    {
        name = "agentimmo",
        grade = {
            [0] = {label = "Employé"},
            [1] = {label = "Co-Pdg"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "unicorn",
        grade = {
            [0] = {label = "Serveur"},
            [1] = {label = "Gérant"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "burgershot",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Employé"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "pizza",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Employé"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "lssd",
        grade = {
            [0] = {label = "Deputy I"},
            [1] = {label = "Deputy II"},
            [2] = {label = "Deputy III"},
            [3] = {label = "Deputy senior"},
            [4] = {label = "Sergeant"},
            [5] = {label = "Lieutenant"},
            [6] = {label = "Captain"},
        },
    },
    {
        name = "yellowjack",
        grade = {
            [0] = {label = "Serveur"},
            [1] = {label = "Gérant"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "gouvernement",
        grade = {
            [0] = {label = "Recrue Sécurité"},
            [1] = {label = "Agent Sécurité"},
            [2] = {label = "Superviseur Sécurité"},
            [3] = {label = "Directeur Sécurité"},
            [4] = {label = "Avocat"},
            [5] = {label = "Directeur Avocat"},
            [6] = {label = "Assistant Gouvernemental"},
            [7] = {label = "Huissier de Justice"},
            [8] = {label = "Magistrat"},
            [9] = {label = "Procureur"},
            [10] = {label = "Gouverneur"},
        },
    },
    {
        name = "harmony",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Novice"},
            [2] = {label = "Expérimenté"},
            [3] = {label = "Chef"},
            [4] = {label = "Patron"},
        },
    },
    {
        name = "noodle",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Employé"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "taxi",
        grade = {
            [0] = {label = "Chauffeur"},
            [1] = {label = "Experimente"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "ltd_nord",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Employé"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "ltd_sud",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Employé"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "bahamas",
        grade = {
            [0] = {label = "Serveur"},
            [1] = {label = "Disc jockey"},
            [2] = {label = "Sécurité"},
            [3] = {label = "Patron"},
        },
    },
}

groupList = {
    {
        name = "unemployed",
        grade = {
            [0] = {label = "Civil"},
        },
    },
    {
        name = "biker",
        grade = {
            [0] = {label = "Prospect"},
            [1] = {label = "Road captain"},
            [2] = {label = "SGT At arms"},
            [3] = {label = "Trésorier"},
            [4] = {label = "Vice-président"},
            [5] = {label = "Président"},
        },
    },
    {
        name = "madrazo",
        grade = {
            [0] = {label = "Pequenio"},
            [1] = {label = "Soldado"},
            [2] = {label = "Teniente"},
            [3] = {label = "Brazo Derecho"},
            [4] = {label = "Jefe"},
        },
    },
    {
        name = "families",
        grade = {
            [0] = {label = "Gangsta"},
            [1] = {label = "Homie"},
            [2] = {label = "OG"},
        },
    },
    {
        name = "ballas",
        grade = {
            [0] = {label = "Petit"},
            [1] = {label = "Dealer"},
            [2] = {label = "Thug"},
            [2] = {label = "Grand"},
            [2] = {label = "Ancien"},
            [2] = {label = "Bras-droit"},
            [2] = {label = "OG"},
        },
    },
    {
        name = "marabunta",
        grade = {
            [0] = {label = "Ninos"},
            [1] = {label = "Miembro"},
            [2] = {label = "Matador"},
            [3] = {label = "Mano derecho"},
            [4] = {label = "Jefe"},
        },
    },
    {
        name = "vagos",
        grade = {
            [0] = {label = "Pequeñio"},
            [1] = {label = "Soldado"},
            [2] = {label = "Commandante"},
            [3] = {label = "Teniente"},
            [4] = {label = "Segundo"},
            [5] = {label = "Jefe"},
        },
    },
    {
        name = "zetas",
        grade = {
            [0] = {label = "Pequeno"},
            [1] = {label = "Soldado"},
            [2] = {label = "Soldado confirmado"},
            [3] = {label = "Commandante"},
            [4] = {label = "Dirigentes"},
            [5] = {label = "Jefe"},
        },
    },
    {
        name = "oneil",
        grade = {
            [0] = {label = "Petit de la famille"},
            [1] = {label = "Adulte"},
            [2] = {label = "Vieux"},
            [3] = {label = "Dirigeant"},
        },
    },
    {
        name = "mnc",
        grade = {
            [0] = {label = "Member"},
            [1] = {label = "Hit"},
            [2] = {label = "Under boss"},
            [3] = {label = "MNC"},
        },
    },
    {
        name = "yakuza",
        grade = {
            [0] = {label = "Shatei"},
            [1] = {label = "kyodai"},
            [2] = {label = "Saiki"},
            [3] = {label = "Gashia"},
            [4] = {label = "Waka"},
            [5] = {label = "Oyabun"},
        },
    },
    {
        name = "410",
        grade = {
            [0] = {label = "Younger"},
            [1] = {label = "Real Gangsta"},
            [2] = {label = "Older"},
            [3] = {label = "Leader"},
        },
    },
    {
        name = "cosanostra",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Soldat"},
            [2] = {label = "Lieutenant"},
            [3] = {label = "Capos"},
            [4] = {label = "Sous boss"},
            [5] = {label = "Patron"},
        },
    },
    {
        name = "coronado",
        grade = {
            [0] = {label = "Soldado"},
            [1] = {label = "Teniente"},
            [2] = {label = "Brazo"},
            [3] = {label = "Patron"},
        },
    },
    {
        name = "russe",
        grade = {
            [0] = {label = "Soldat"},
            [1] = {label = "Soldat élite"},
            [2] = {label = "Caporal"},
            [3] = {label = "Lieutenant"},
            [4] = {label = "Bras-droit"},
            [5] = {label = "Parrain"},
        },
    },
    {
        name = "redent",
        grade = {
            [0] = {label = "Redent"},
        },
    },
    {
        name = "aztecas",
        grade = {
            [0] = {label = "Nuevo"},
            [1] = {label = "Sangre"},
            [2] = {label = "Hermano Mayor"},
            [3] = {label = "Brazo Derecho"},
            [4] = {label = "Jefe"},
        },
    },
    {
        name = "boneli",
        grade = {
            [0] = {label = "Cugino"},
            [1] = {label = "Fratello"},
            [2] = {label = "Capo"},
            [3] = {label = "Broit Droit"},
            [4] = {label = "Don"},
        },
    },
    {
        name = "mayans",
        grade = {
            [0] = {label = "Pequeno"},
            [1] = {label = "Miembro"},
            [2] = {label = "EL Pacificador"},
            [3] = {label = "El Secretario"},
            [4] = {label = "Vide-Presidente"},
            [5] = {label = "Presidente"},
        },
    },
    {
        name = "hudson",
        grade = {
            [0] = {label = "Ainée"},
            [1] = {label = "Famille Hudson"},
        },
    },
    {
        name = "triade",
        grade = {
            [0] = {label = "Kobun"},
            [1] = {label = "Ken'Shou"},
            [2] = {label = "Saiko"},
            [3] = {label = "Souke"},
            [4] = {label = "Oyabun"},
        },
    },
    {
        name = "mcreary",
        grade = {
            [0] = {label = "Little Boy"},
            [1] = {label = "Boy"},
            [2] = {label = "Big boy"},
            [3] = {label = "Mac"},
            [4] = {label = "Advisor"},
            [5] = {label = "Under boss"},
            [6] = {label = "Boss"},
        },
    },
    {
        name = "kkangpae",
        grade = {
            [0] = {label = "Soldat"},
            [1] = {label = "Capot"},
            [2] = {label = "Bras gauche"},
            [3] = {label = "Bras droit"},
            [4] = {label = "Chef"},
        },
    },
    {
        name = "blueboys",
        grade = {
            [0] = {label = "Blue Recruit"},
            [1] = {label = "Militiaman"},
            [2] = {label = "Warrior"},
            [3] = {label = "Underleader"},
            [4] = {label = "Leader"},
        },
    },
    {
        name = "bandadiaz",
        grade = {
            [0] = {label = "Recrue"},
            [1] = {label = "Soldado"},
            [2] = {label = "Commandant"},
            [3] = {label = "Bras droit"},
            [4] = {label = "Patron"},
        },
    },
    {
        name = "mafiaarmenienne",
        grade = {
            [0] = {label = "Havak"},
            [1] = {label = "Henchman"},
            [2] = {label = "Zinvor"},
            [3] = {label = "Zenk"},
            [4] = {label = "Major"},
            [5] = {label = "Shef"},
        },
    },
    {
        name = "professionnels",
        grade = {
            [0] = {label = "Corps"},
            [1] = {label = "General"},
            [2] = {label = "Patron"},
        },
    },
    {
        name = "reiffen",
        grade = {
            [0] = {label = "Soldat"},
            [1] = {label = "Colonel"},
            [2] = {label = "Bras droit"},
            [3] = {label = "Parrain"},
        },
    },
    {
        name = "jashari",
        grade = {
            [0] = {label = "Nouveaux"},
            [1] = {label = "Homme de main"},
            [2] = {label = "Gestionnaire"},
            [3] = {label = "Caporal"},
            [4] = {label = "Bras droit"},
            [5] = {label = "Parrain"},
        },
    },
}

TriggerEvent('chat:addSuggestion', '/'..'report', 'Vous permet de rentrer en contact avec le staff.', {{ name = 'message', help = "Exemple : Bonjour, je n'ai plus mon métier merci."}})

local gamerTags = {}
function showNames(bool)
    isNameShown = bool
    if isNameShown then
        Citizen.CreateThread(function()
            while isNameShown do
                local plyPed = PlayerPedId()
                for k,v in pairs(GetActivePlayers()) do
                    local PlayerServerId, PlayerPed = GetPlayerServerId(v), GetPlayerPed(v)
                    if #(GetEntityCoords(plyPed, false) - GetEntityCoords(PlayerPed, false)) < 5000.0 then
                        gamerTags[PlayerPed] = CreateFakeMpGamerTag(GetPlayerPed(v), "("..PlayerServerId..") - "..GetPlayerName(v), false, false, "", 0)
                        SetMpGamerTagAlpha(gamerTags[PlayerPed], 0, 255)
                        SetMpGamerTagAlpha(gamerTags[PlayerPed], 2, 255)
                        SetMpGamerTagAlpha(gamerTags[PlayerPed], 4, 255)
                        SetMpGamerTagVisibility(gamerTags[PlayerPed], 0, true)
                        SetMpGamerTagVisibility(gamerTags[PlayerPed], 2, true)
                        SetMpGamerTagVisibility(gamerTags[PlayerPed], 4, NetworkIsPlayerTalking(v))
                        if localPlayers[PlayerServerId] ~= nil then
                            if localPlayers[PlayerServerId].vip ~= 0 then
                                if localPlayers[PlayerServerId].vip == 1 then
                                    SetMpGamerTagColour(gamerTags[PlayerPed], 0, 12)
                                elseif localPlayers[PlayerServerId].vip == 2 then
                                    SetMpGamerTagColour(gamerTags[PlayerPed], 0, 9)
                                end
                            end
                        end
                        if localPlayers[PlayerServerId] ~= nil then
                            if localPlayers[PlayerServerId].rank == "_dev" then
                                SetMpGamerTagColour(gamerTags[PlayerPed], 0, 18)
                            elseif localPlayers[PlayerServerId].rank == "gs" then
                                SetMpGamerTagColour(gamerTags[PlayerPed], 0, 6)
                            elseif localPlayers[PlayerServerId].rank == "superadmin" then
                                SetMpGamerTagColour(gamerTags[PlayerPed], 0, 15)
                            elseif localPlayers[PlayerServerId].rank == "admin" then
                                SetMpGamerTagColour(gamerTags[PlayerPed], 0, 49)
                            end
                        end
                        if NetworkIsPlayerTalking(v) then
                            SetMpGamerTagColour(gamerTags[PlayerPed], 4, 0)
                        else
                            SetMpGamerTagColour(gamerTags[PlayerPed], 4, 0)
                        end
                    else
                        RemoveMpGamerTag(gamerTags[PlayerPed])
                        gamerTags[PlayerPed] = nil
                    end
                end
                Citizen.Wait(25)
            end
            for k,v in pairs(gamerTags) do
                RemoveMpGamerTag(v)
            end
            gamerTags = {}
        end)
    end
end

local gamerTagsRp = {}
function showNamesRp(bool)
    isNameShownRp = bool
    if isNameShownRp then
        Citizen.CreateThread(function()
            while isNameShownRp do
                local plyPed = PlayerPedId()
                for k,v in pairs(GetActivePlayers()) do
                    local PlayerServerId, PlayerPed = GetPlayerServerId(v), GetPlayerPed(v)
                    if #(GetEntityCoords(plyPed, false) - GetEntityCoords(PlayerPed, false)) < 5000.0 then
                        if localPlayers[PlayerServerId] ~= nil then
                            if not localPlayers[PlayerServerId].firstname then
                                localPlayers[PlayerServerId].firstname = "Aucun"
                            end
                            if not localPlayers[PlayerServerId].firstname then
                                localPlayers[PlayerServerId].lastname = "Aucun"
                            end
                        end
                        gamerTagsRp[PlayerPed] = CreateFakeMpGamerTag(GetPlayerPed(v), "("..PlayerServerId..") - "..localPlayers[PlayerServerId].firstname.. " "..localPlayers[PlayerServerId].lastname or "Aucun", false, false, "", 0)
                        SetMpGamerTagAlpha(gamerTagsRp[PlayerPed], 0, 255)
                        SetMpGamerTagAlpha(gamerTagsRp[PlayerPed], 2, 255)
                        SetMpGamerTagAlpha(gamerTagsRp[PlayerPed], 4, 255)
                        SetMpGamerTagVisibility(gamerTagsRp[PlayerPed], 0, true)
                        SetMpGamerTagVisibility(gamerTagsRp[PlayerPed], 2, true)
                        SetMpGamerTagVisibility(gamerTagsRp[PlayerPed], 4, NetworkIsPlayerTalking(v))
                        if localPlayers[PlayerServerId] ~= nil then
                            if localPlayers[PlayerServerId].vip ~= 0 then
                                if localPlayers[PlayerServerId].vip == 1 then
                                    SetMpGamerTagColour(gamerTags[PlayerPed], 0, 12)
                                elseif localPlayers[PlayerServerId].vip == 2 then
                                    SetMpGamerTagColour(gamerTags[PlayerPed], 0, 9)
                                end
                            end
                        end
                        if localPlayers[PlayerServerId] ~= nil then
                            if localPlayers[PlayerServerId].rank == "_dev" then
                                SetMpGamerTagColour(gamerTagsRp[PlayerPed], 0, 18)
                            elseif localPlayers[PlayerServerId].rank == "gs" then
                                SetMpGamerTagColour(gamerTagsRp[PlayerPed], 0, 6)
                            elseif localPlayers[PlayerServerId].rank == "superadmin" then
                                SetMpGamerTagColour(gamerTagsRp[PlayerPed], 0, 15)
                            elseif localPlayers[PlayerServerId].rank == "admin" then
                                SetMpGamerTagColour(gamerTagsRp[PlayerPed], 0, 49)
                            end
                        end
                        if NetworkIsPlayerTalking(v) then
                            SetMpGamerTagColour(gamerTagsRp[PlayerPed], 4, 0)
                        else
                            SetMpGamerTagColour(gamerTagsRp[PlayerPed], 4, 0)
                        end
                    else
                        RemoveMpGamerTag(gamerTagsRp[PlayerPed])
                        gamerTagsRp[PlayerPed] = nil
                    end
                end
                Citizen.Wait(25)
            end
            for k,v in pairs(gamerTagsRp) do
                RemoveMpGamerTag(v)
            end
            gamerTagsRp = {}
        end)
    end
end

RegisterNetEvent("sCore:TransformPed")
AddEventHandler("sCore:TransformPed",function(modelped)
    modelHash = GetHashKey(modelped)
    if IsModelInCdimage(modelHash) then
        ESX.Streaming.RequestModel(modelHash, function()
            SetPlayerModel(PlayerId(), modelHash)
            SetModelAsNoLongerNeeded(modelHash)
            SetPedDefaultComponentVariation(PlayerPedId())
            TriggerEvent('esx:restoreLoadout')
        end)
    end
end)

RegisterNetEvent("sCore:ResetPed")
AddEventHandler("sCore:ResetPed",function()
    ESX.TriggerServerCallback('Sneakyesx_skin:getPlayerSkin', function(skin, jobSkin)
        local isMale = skin.sex == 0
        TriggerEvent('Sneakyskinchanger:loadDefaultModel', isMale, function()
            ESX.TriggerServerCallback('Sneakyesx_skin:getPlayerSkin', function(skin)
                local ped = PlayerPedId()
                TriggerEvent('Sneakyskinchanger:loadSkin', skin)
                TriggerEvent('esx:restoreLoadout')
            end)
        end)
    end)
end)
